<!DOCTYPE html>
<html lang="pl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700&display=swap&subset=latin-ext"
        rel="stylesheet">
    <link rel="icon" href="favicon.png">
    <link rel="stylesheet" href="style.css">
    <title></title>
</head>

<body>
    <h2 class="result">JEDNORĘKI BANDYTA</h2>
    <div class="game">
        <div class="symbol" data-numb="0"></div>
        <div class="symbol" data-numb="1"></div>
        <div class="symbol" data-numb="2"></div>
    </div>
    <form action="submit"><input type="number" placeholder="Podaj stawkę!"><button class="play">Zakręć!</button></form>
    <div class="interface">
        <h3>Twoje saldo to: <span class="money">100</span> ₿*</h3>
        <p>Rozegrałeś gier: <span class="gameNumb"></span> ,w tym wygranych: <span class="winNumb"></span> i
            przegranych: <span class="losesNumb"></span></p>
    </div>
    <img class="face" src="face.png" alt="face of The Godfater">
    <footer>
        <p>* Bartków ;D</p>
    </footer>
    <script>
        const btnPlay = document.querySelector("play");
        const form = document.querySelector("form");
        const input = document.querySelector("input");
        const symbols = [document.querySelector(`[data-numb="0"]`), document.querySelector(`[data-numb="1"]`), document
            .querySelector(`[data-numb="2"]`)
        ];
        const h2Text = document.querySelector("h2");
        const plrMoney = document.querySelector(".money");
        const gamesNumb = document.querySelector(".gameNumb");
        const winsNumb = document.querySelector(".winNumb");
        const losesNumb = document.querySelector(".losesNumb");
        const symbolsArr = [0, 1, 2]

        const stats = {
            games: 0,
            wins: 0,
            loses: 0,
        }

        const wallet = {
            plrMoney: 100,
            bet: 0,
        }
        const player = {
            win: false,
            lose: false,

        }


        //interfejs

        //implementacja
        const cleaning = () => {
            input.value = "";
            player.win = false;
            player.lose = false;
        };
        const draw = () => {
            return symbolsArr[Math.floor(Math.random() * symbolsArr.length)];
        };
        const checkResult = (res1, res2, res3) => {
            symbols[0].style.backgroundImage = `url(${res1}.png)`;
            symbols[1].style.backgroundImage = `url(${res2}.png)`;
            symbols[2].style.backgroundImage = `url(${res3}.png)`;
            console.log(symbols[0], res1);
            if ((res1 === res2 && res1 === res3) || (res1 !== res2 && res1 !== res3 && res2 !== res3)) {
                player.win = true;
                wallet.plrMoney += wallet.bet * 5;
                stats.wins++;
                console.log("wygrana");
            } else {
                player.lose = true;
                stats.loses++;
                console.log("przegrana");
            }
        };
        const showResult = () => {
            stats.games++;
            plrMoney.textContent = wallet.plrMoney;
            gamesNumb.textContent = stats.games;
            winsNumb.textContent = stats.wins;
            losesNumb.textContent = stats.loses;
            if (player.win) {
                setTimeout(() => {
                    h2Text.style.color = "lawngreen";
                    h2Text.textContent = `WYGRALEŚ ${wallet.bet * 5} ₿*`;
                }, 600)

            } else if (player.lose) {
                setTimeout(() => {
                    h2Text.style.color = "orangered";
                    h2Text.textContent = `PRZEGRALEŚ ${wallet.bet} ₿*`;
                }, 600)
            }
        };

        const startGame = (e) => {
            e.preventDefault();
            if (wallet.plrMoney == 0) {
                return alert("Zostałeś goły i wesoły ;D odśwież stronę ,aby zagrać ponownie");
            }
            wallet.bet = input.value;
            if (!wallet.bet || wallet.bet <= 0) {
                alert("Podaj stawkę!")
            } else if (wallet.bet > wallet.plrMoney) {
                alert("NIE OSZUKUJ!")
            } else {
                wallet.plrMoney -= wallet.bet;
                symbols.forEach(symbol => symbol.classList.toggle("active"));
                setTimeout(() => {
                    symbols.forEach(symbol => symbol.classList.toggle("active"))
                }, 700);
                cleaning();
                const symbol1 = draw();
                const symbol2 = draw();
                const symbol3 = draw();
                checkResult(symbol1, symbol2, symbol3);
                showResult();
            }
        }
        form.addEventListener("submit", startGame);
    </script>
</body>

</html>